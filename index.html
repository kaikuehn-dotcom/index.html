<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>BRL ↔ EUR Calculator</title>

  <!-- Mobile / iPhone -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="BRL↔EUR">

  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f4f6f8;
      color: #111;
      font-size: 16px;
    }

    .app {
      max-width: 720px;
      margin: 0 auto;
      padding: 16px;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 12px;
    }

    .card {
      background: #fff;
      border-radius: 12px;
      padding: 14px;
      margin-bottom: 14px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }

    label {
      display: block;
      font-size: 14px;
      margin-bottom: 4px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    th, td {
      padding: 8px;
      border-bottom: 1px solid #ddd;
      text-align: right;
    }

    th:first-child,
    td:first-child {
      text-align: left;
    }

    .small {
      font-size: 12px;
      color: #666;
    }
  </style>
</head>

<body>
<div class="app">

  <select id="lang">
    <option value="de">Deutsch</option>
    <option value="en">English</option>
    <option value="pt">Português</option>
  </select>

  <h1 id="title"></h1>

  <div class="card">
    <label id="lblNet"></label>
    <input id="netBRL" type="number" value="2500">

    <label id="lblEur"></label>
    <input id="eurBudget" type="number" value="0">
  </div>

  <div class="card">
    <label id="lblRate"></label>
    <input id="rate" type="number" step="0.01" value="6.36">

    <label id="lblAtmFee"></label>
    <input id="atmFee" type="number" value="25">

    <label id="lblLimit"></label>
    <input id="atmLimit" type="number" value="2500">

    <label id="lblPct"></label>
    <input id="bankPct" type="number" step="0.1" value="1.7">
  </div>

  <div class="card">
    <table>
      <tr>
        <th id="resLabel"></th>
        <th id="resValue"></th>
      </tr>
      <tr>
        <td id="rWithdrawals"></td>
        <td id="withdrawals">–</td>
      </tr>
      <tr>
        <td id="rEur"></td>
        <td id="eurNeeded">–</td>
      </tr>
      <tr>
        <td id="rEff"></td>
        <td id="effRate">–</td>
      </tr>
    </table>
  </div>

  <p class="small" id="footer"></p>

</div>

<script>
const T = {
  de: {
    title: "BRL ↔ EUR Abhebungsrechner",
    net: "Netto BRL gewünscht",
    eur: "ODER EUR Budget",
    rate: "Wechselkurs (1 EUR = X BRL)",
    atmFee: "ATM-Gebühr pro Abhebung (BRL)",
    limit: "ATM-Limit (BRL)",
    pct: "Bankgebühr (%)",
    withdrawals: "Anzahl Abhebungen",
    eurRes: "EUR benötigt",
    eff: "Effektiver Kurs",
    footer: "Offline nutzbar · Mobil optimiert"
  },
  en: {
    title: "BRL ↔ EUR Withdrawal Calculator",
    net: "Net BRL desired",
    eur: "OR EUR budget",
    rate: "Exchange rate (1 EUR = X BRL)",
    atmFee: "ATM fee per withdrawal (BRL)",
    limit: "ATM limit (BRL)",
    pct: "Bank fee (%)",
    withdrawals: "Withdrawals",
    eurRes: "EUR needed",
    eff: "Effective rate",
    footer: "Works offline · Mobile optimized"
  },
  pt: {
    title: "Calculadora de Saque BRL ↔ EUR",
    net: "BRL líquido desejado",
    eur: "OU orçamento em EUR",
    rate: "Câmbio (1 EUR = X BRL)",
    atmFee: "Taxa do ATM por saque (BRL)",
    limit: "Limite do ATM (BRL)",
    pct: "Taxa do banco (%)",
    withdrawals: "Número de saques",
    eurRes: "EUR necessário",
    eff: "Câmbio efetivo",
    footer: "Funciona offline · Otimizado para celular"
  }
};

function applyLang() {
  const l = lang.value;
  title.innerText = T[l].title;
  lblNet.innerText = T[l].net;
  lblEur.innerText = T[l].eur;
  lblRate.innerText = T[l].rate;
  lblAtmFee.innerText = T[l].atmFee;
  lblLimit.innerText = T[l].limit;
  lblPct.innerText = T[l].pct;
  rWithdrawals.innerText = T[l].withdrawals;
  rEur.innerText = T[l].eurRes;
  rEff.innerText = T[l].eff;
  footer.innerText = T[l].footer;
}

function calc() {
  const net = +netBRL.value;
  const rateV = +rate.value;
  const atm = +atmFee.value;
  const lim = +atmLimit.value;
  const pct = +bankPct.value;

  if (!rateV || !lim) return;

  const brl = net;
  const n = Math.ceil(brl / lim);
  const eurBase = (brl + n * atm) / rateV;
  const eur = eurBase * (1 + pct / 100);
  const eff = brl / eur;

  withdrawals.innerText = n;
  eurNeeded.innerText = eur.toFixed(2);
  effRate.innerText = eff.toFixed(3);
}

document.querySelectorAll("input, select").forEach(e =>
  e.addEventListener("input", () => { applyLang(); calc(); })
);

applyLang();
calc();
</script>

</body>
</html>
