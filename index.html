<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>BRL ‚Üî EUR Vergleich</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="BRL‚ÜîEUR">

<style>
:root{
  --bg:#f3f6fb;
  --card:#ffffff;
  --accent:#2563eb;
  --accentSoft:#e8efff;
  --best:#e9fbf0;
  --bestBorder:#16a34a;
  --border:#d7dbe3;
  --input:#eef2ff;
  --muted:#94a3b8;
}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  background:linear-gradient(180deg,#f3f6fb,#eef2f7);
  color:#0f172a;
}
.app{
  max-width:920px;
  margin:auto;
  padding:16px;
}
h1{font-size:22px;margin:12px 0 16px}
.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
  box-shadow:0 6px 20px rgba(15,23,42,.08);
}
label{
  display:block;
  font-size:13px;
  font-weight:700;
  margin:10px 0 4px;
}
input,select{
  width:100%;
  padding:12px;
  font-size:16px;
  border-radius:12px;
  border:2px solid var(--input);
}
input:focus,select:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 3px var(--accentSoft);
}
input.inactive{
  background:#f8fafc;
  color:var(--muted);
}
.grid{display:grid;gap:12px}
@media(min-width:760px){.grid{grid-template-columns:1fr 1fr}}
.toggle{
  display:flex;
  background:#e5e9f2;
  border-radius:999px;
  padding:4px;
}
.toggle button{
  flex:1;
  border:none;
  padding:10px;
  font-size:14px;
  font-weight:800;
  border-radius:999px;
  background:transparent;
  color:#334155;
}
.toggle button.active{
  background:var(--accent);
  color:#fff;
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}
th,td{
  padding:10px;
  border-bottom:1px solid var(--border);
  text-align:right;
}
th:first-child,td:first-child{text-align:left}
tr.best{background:var(--best)}
.badge{
  display:inline-block;
  background:#16a34a;
  color:#fff;
  font-size:12px;
  padding:4px 10px;
  border-radius:999px;
  margin-left:6px;
}
.top-best{
  border:2px solid var(--bestBorder);
  background:linear-gradient(135deg,#ecfdf5,#f0fdf4);
}
.small{font-size:12px;color:#475569}
</style>
</head>

<body>
<div class="app">

<h1>BRL ‚Üî EUR Abhebungs-Vergleich</h1>

<!-- MODE -->
<div class="card">
  <div class="toggle">
    <button id="modeBRL" class="active">BRL abheben</button>
    <button id="modeEUR">EUR Budget</button>
  </div>

  <div class="grid" style="margin-top:14px">
    <div>
      <label>Netto BRL gew√ºnscht</label>
      <input id="netBRL" type="number" value="5000">
    </div>
    <div>
      <label>EUR Budget verf√ºgbar</label>
      <input id="eurBudget" type="number" value="0" class="inactive">
    </div>
  </div>

  <p class="small" id="modeHint">
    Du gibst an, wie viele BRL du abheben willst.
  </p>
</div>

<!-- OPTIONEN -->
<div id="optionInputs"></div>

<!-- BEST -->
<div class="card top-best">
  <h2>üèÜ Beste Option</h2>
  <div id="bestText"></div>
</div>

<!-- TABLE -->
<div class="card">
<table>
<thead>
<tr>
  <th>Option</th>
  <th>Abhebungen</th>
  <th id="tMain">EUR n√∂tig</th>
  <th>Eff. Kurs</th>
</tr>
</thead>
<tbody id="results"></tbody>
</table>
</div>

<p class="small">
Automatisch sortiert (beste Option zuerst)
</p>

</div>

<script>
const OPTIONS = [
  { name:"N26 ATM", rate:6.36, atm:25, limit:2500, pct:1.7 },
  { name:"Wise",    rate:6.20, atm:0,  limit:999999, pct:0 }
];

let mode = "BRL";

const optionInputs = document.getElementById("optionInputs");
const results = document.getElementById("results");
const bestText = document.getElementById("bestText");

function renderOptions(){
  optionInputs.innerHTML = "";

  OPTIONS.forEach((o)=>{
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <b>${o.name}</b>
      <div class="grid">
        <div><label>Kurs</label><input type="number" value="${o.rate}"></div>
        <div><label>Bank %</label><input type="number" value="${o.pct}"></div>
        <div><label>ATM Geb√ºhr</label><input type="number" value="${o.atm}"></div>
        <div><label>ATM Limit</label><input type="number" value="${o.limit}"></div>
      </div>
    `;

    const inputs = card.querySelectorAll("input");
    inputs[0].oninput = e => { o.rate  = +e.target.value; calc(); };
    inputs[1].oninput = e => { o.pct   = +e.target.value; calc(); };
    inputs[2].oninput = e => { o.atm   = +e.target.value; calc(); };
    inputs[3].oninput = e => { o.limit = +e.target.value; calc(); };

    optionInputs.appendChild(card);
  });
}

function calc(){
  let rows = OPTIONS.map(o=>{
    let n, main, eff;

    if(mode==="BRL"){
      const net = +netBRL.value || 0;
      n = Math.ceil(net / o.limit);
      main = ((net + n*o.atm) / o.rate) * (1 + o.pct/100);
      eff = net / main;
    } else {
      const eur = +eurBudget.value || 0;
      const base = eur / (1 + o.pct/100);
      let best=0, bestN=1;
      for(let i=1;i<=20;i++){
        const brl = Math.min(i*o.limit, base*o.rate - i*o.atm);
        if(brl > best){ best = brl; bestN = i; }
      }
      n = bestN;
      main = best;
      eff = best / eur;
    }
    return { ...o, n, main, eff };
  }).sort((a,b)=>b.eff-a.eff);

  results.innerHTML = "";
  rows.forEach((r,i)=>{
    results.innerHTML += `
      <tr class="${i===0?'best':''}">
        <td>${r.name}${i===0?'<span class="badge">BEST</span>':''}</td>
        <td>${r.n}</td>
        <td>${mode==="BRL" ? r.main.toFixed(2)+" EUR" : Math.round(r.main)+" BRL"}</td>
        <td>${r.eff.toFixed(3)}</td>
      </tr>
    `;
  });

  const b = rows[0];
  bestText.innerHTML = `
    <b>${b.name}</b><br>
    Abhebungen: ${b.n}<br>
    ${mode==="BRL" ? "EUR n√∂tig" : "BRL netto"}:
    <b>${mode==="BRL"?b.main.toFixed(2)+" EUR":Math.round(b.main)+" BRL"}</b>
  `;
}

function switchMode(m){
  mode = m;
  if(m==="BRL"){
    eurBudget.value = 0;
    eurBudget.classList.add("inactive");
    netBRL.classList.remove("inactive");
    tMain.innerText = "EUR n√∂tig";
    modeHint.innerText = "Du gibst an, wie viele BRL du abheben willst.";
  } else {
    netBRL.value = 0;
    netBRL.classList.add("inactive");
    eurBudget.classList.remove("inactive");
    tMain.innerText = "BRL netto";
    modeHint.innerText = "Du gibst an, wie viel EUR du einsetzen willst.";
  }
  calc();
}

modeBRL.onclick = ()=>{ modeBRL.classList.add("active"); modeEUR.classList.remove("active"); switchMode("BRL"); };
modeEUR.onclick = ()=>{ modeEUR.classList.add("active"); modeBRL.classList.remove("active"); switchMode("EUR"); };

netBRL.oninput = calc;
eurBudget.oninput = calc;

renderOptions();
calc();
</script>

</body>
</html>
