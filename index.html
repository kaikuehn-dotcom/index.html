<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>BRL ‚Üî EUR Vergleich</title>

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="BRL‚ÜîEUR">

<style>
:root{
  --bg:#f4f6f8;
  --card:#ffffff;
  --accent:#2563eb;
  --best:#e9fbf0;
  --border:#dcdfe4;
  --input:#eef2ff;
}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,system-ui,sans-serif;
  background:var(--bg);
}
.app{
  max-width:900px;
  margin:auto;
  padding:16px;
}
h1{font-size:22px;margin:10px 0 14px}
.card{
  background:var(--card);
  border-radius:14px;
  padding:14px;
  margin-bottom:14px;
  box-shadow:0 2px 8px rgba(0,0,0,.08);
}
label{
  display:block;
  font-size:13px;
  font-weight:700;
  margin:10px 0 4px;
}
input,select{
  width:100%;
  padding:12px;
  font-size:16px;
  border-radius:10px;
  border:2px solid var(--input);
}
input:focus,select:focus{
  outline:none;
  border-color:var(--accent);
}
.grid{display:grid;gap:12px}
@media(min-width:760px){.grid{grid-template-columns:1fr 1fr}}
.toggle{
  display:flex;
  border-radius:999px;
  overflow:hidden;
  border:2px solid var(--input);
}
.toggle button{
  flex:1;
  padding:10px;
  font-size:14px;
  font-weight:700;
  border:none;
  background:#fff;
}
.toggle button.active{
  background:var(--accent);
  color:#fff;
}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:10px;border-bottom:1px solid var(--border);text-align:right}
th:first-child,td:first-child{text-align:left}
tr.best{background:var(--best)}
.badge{
  display:inline-block;
  background:#16a34a;
  color:#fff;
  font-size:12px;
  padding:4px 8px;
  border-radius:999px;
  margin-left:6px;
}
.small{font-size:12px;color:#555}
.top-best{border:2px solid #16a34a}
</style>
</head>

<body>
<div class="app">

<select id="lang">
  <option value="de">Deutsch</option>
  <option value="en">English</option>
  <option value="pt">Portugu√™s</option>
</select>

<h1 id="title"></h1>

<!-- MODUS -->
<div class="card">
  <div class="toggle">
    <button id="modeBRL" class="active">BRL abheben</button>
    <button id="modeEUR">EUR Budget</button>
  </div>

  <div class="grid" style="margin-top:12px">
    <div id="brlBox">
      <label id="lblBRL"></label>
      <input id="netBRL" type="number" value="5000">
    </div>
    <div id="eurBox" style="display:none">
      <label id="lblEUR"></label>
      <input id="eurBudget" type="number" value="1000">
    </div>
  </div>
</div>

<!-- OPTIONEN -->
<div id="optionInputs"></div>

<!-- BESTE OPTION -->
<div class="card top-best">
  <h2>üèÜ <span id="bestTitle"></span></h2>
  <div id="bestText"></div>
</div>

<!-- TABELLE -->
<div class="card">
<table>
<thead>
<tr>
  <th id="tOption"></th>
  <th id="tWithdrawals"></th>
  <th id="tMain"></th>
  <th id="tEff"></th>
</tr>
</thead>
<tbody id="results"></tbody>
</table>
</div>

<p class="small" id="footer"></p>

</div>

<script>
const TEXT={
de:{title:"BRL ‚Üî EUR Abhebungs-Vergleich",brl:"Netto BRL gew√ºnscht",eur:"EUR Budget verf√ºgbar",opt:"Option",with:"Abhebungen",mainA:"EUR n√∂tig",mainB:"BRL netto",eff:"Effektiver Kurs",best:"Beste Option",footer:"Automatisch sortiert (best ‚Üí worst)"},
en:{title:"BRL ‚Üî EUR Withdrawal Comparison",brl:"Net BRL desired",eur:"EUR budget available",opt:"Option",with:"Withdrawals",mainA:"EUR needed",mainB:"BRL net",eff:"Effective rate",best:"Best option",footer:"Automatically sorted (best ‚Üí worst)"},
pt:{title:"Compara√ß√£o de Saque BRL ‚Üî EUR",brl:"BRL l√≠quido desejado",eur:"Or√ßamento em EUR",opt:"Op√ß√£o",with:"Saques",mainA:"EUR necess√°rio",mainB:"BRL l√≠quido",eff:"C√¢mbio efetivo",best:"Melhor op√ß√£o",footer:"Ordenado automaticamente (melhor ‚Üí pior)"}
};

const OPTIONS=[
 {name:"N26 ATM",rate:6.36,atm:25,limit:2500,pct:1.7},
 {name:"Wise",rate:6.20,atm:0,limit:999999,pct:0}
];

let mode="BRL";

function ui(){
 const l=lang.value;
 title.innerText=TEXT[l].title;
 lblBRL.innerText=TEXT[l].brl;
 lblEUR.innerText=TEXT[l].eur;
 tOption.innerText=TEXT[l].opt;
 tWithdrawals.innerText=TEXT[l].with;
 tMain.innerText=mode==="BRL"?TEXT[l].mainA:TEXT[l].mainB;
 tEff.innerText=TEXT[l].eff;
 bestTitle.innerText=TEXT[l].best;
 footer.innerText=TEXT[l].footer;
}

function renderOptions(){
 optionInputs.innerHTML="";
 OPTIONS.forEach((o,i)=>{
  optionInputs.innerHTML+=`
   <div class="card">
    <b>${o.name}</b>
    <div class="grid">
      <div><label>Kurs</label><input type="number" value="${o.rate}" oninput="OPTIONS[${i}].rate=this.value;calc()"></div>
      <div><label>Bank %</label><input type="number" value="${o.pct}" ${o.name==="Wise"?"disabled":""} oninput="OPTIONS[${i}].pct=this.value;calc()"></div>
      <div><label>ATM Geb√ºhr</label><input type="number" value="${o.atm}" oninput="OPTIONS[${i}].atm=this.value;calc()"></div>
      <div><label>ATM Limit</label><input type="number" value="${o.limit}" oninput="OPTIONS[${i}].limit=this.value;calc()"></div>
    </div>
   </div>`;
 });
}

function calc(){
 const rows=OPTIONS.map(o=>{
  const rate=+o.rate,atm=+o.atm,limit=+o.limit,pct=+o.pct;
  let n,main,eff;
  if(mode==="BRL"){
    const net=+netBRL.value;
    n=Math.ceil(net/limit);
    main=((net+n*atm)/rate)*(1+pct/100);
    eff=net/main;
  }else{
    const eur=+eurBudget.value;
    const base=eur/(1+pct/100);
    let best=0,bestN=1;
    for(let i=1;i<=20;i++){
      const brl=Math.min(i*limit,base*rate-i*atm);
      if(brl>best){best=brl;bestN=i;}
    }
    n=bestN;main=best;eff=best/eur;
  }
  return{name:o.name,n,main,eff};
 }).sort((a,b)=>b.eff-a.eff);

 results.innerHTML="";
 rows.forEach((r,i)=>{
  results.innerHTML+=`
   <tr class="${i===0?"best":""}">
    <td>${r.name}${i===0?'<span class="badge">BEST</span>':""}</td>
    <td>${r.n}</td>
    <td>${mode==="BRL"?r.main.toFixed(2)+" EUR":Math.round(r.main)+" BRL"}</td>
    <td>${r.eff.toFixed(3)}</td>
   </tr>`;
 });

 const b=rows[0];
 bestText.innerHTML=`<b>${b.name}</b><br>${TEXT[lang.value].with}: ${b.n}<br>${mode==="BRL"?TEXT[lang.value].mainA:TEXT[lang.value].mainB}: ${mode==="BRL"?b.main.toFixed(2)+" EUR":Math.round(b.main)+" BRL"}`;
}

modeBRL.onclick=()=>{mode="BRL";modeBRL.classList.add("active");modeEUR.classList.remove("active");brlBox.style.display="block";eurBox.style.display="none";ui();calc()};
modeEUR.onclick=()=>{mode="EUR";modeEUR.classList.add("active");modeBRL.classList.remove("active");brlBox.style.display="none";eurBox.style.display="block";ui();calc()};
lang.onchange=()=>{ui();calc()};

ui();renderOptions();calc();
</script>

</body>
</html>
